<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <h1>Привет из Mini App!</h1>

    <p id="user"></p>
    <button id="sendBtn">Отправить ID боту</button>
    <div id="viewport"></div>

    <script>
      const tg = window.Telegram.WebApp;

      // Разворачиваем окно под экран
      tg.expand();

      // Отображаем данные о пользователе
      const userEl = document.getElementById("user");
      userEl.innerText = `Ваш Telegram ID: ${tg.initDataUnsafe.user.id}`;

      // Кнопка отправки ID боту
      const btn = document.getElementById("sendBtn");
      btn.addEventListener("click", () => {
        tg.sendData(tg.initDataUnsafe.user.id.toString());
      });

      // Функция обновления размеров viewport
      const viewportEl = document.getElementById("viewport");
      function updateViewport() {
        viewportEl.innerHTML = `
        <p>Ширина: ${tg.viewport.width}px</p>
        <p>Высота: ${tg.viewport.height}px</p>
      `;
        console.log("Ширина:", tg.viewport.width);
        console.log("Высота:", tg.viewport.height);
      }

      // Инициализация размеров
      updateViewport();

      // Обновление при изменении размера окна
      window.addEventListener("resize", updateViewport);
    </script>
  </body>
</html>
